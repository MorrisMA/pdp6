AC0==0
AC1==1
AC2==2
PDP==17

CPA==0
PRS==4

PTP==100

EXTERN PUTC,PUTS
EXTERN GETCH,GETC
EXTERN PUTN
EXTERN PTPUT
EXTERN DTTEST

ENTRY:	JRST	START

PDL:	BLOCK	100
SP:	XWD	-100,PDL-1

START:	MOVE	PDP,SP

	;; NUMBER TEST
;	MOVE	AC1,[-1234]
;	PUSHJ	PDP,PUTN
;	MOVE	AC1,[1234]
;	PUSHJ	PDP,PUTN

	;; DECTAPE TEST
	JRST	DTTEST

	;; UUO TEST
;	UUO1	123

	;; ENABLE CLOCK PI ON CHANNEL 1
;	CONO	CPA,2001
	;; ENABLE PI ON CHANNEL 1
;	CONO	PRS,2300
;	JRST	.

	;; WRITE MESSAGE TO TTY
	MOVSI	AC2,440700
	HRRI	AC2,MSG
	PUSHJ	PDP,PUTS

	;; WRITE FROM TTY TO PTP
	PUSHJ	PDP,GETC
;	CONO	PTP,20
	PUSHJ	PDP,PTPUT
	JRST	.-2

	HALT

MSG:	ASCIZ /Hello, world!
yo! > /

; UUO HANDLER
UUO:	0
	MOVSI	AC2,440700
	HRRI	AC2,UUOMSG
	PUSHJ	PDP,PUTS
	JRSTF	@UUO
UUOMSG:	ASCIZ /(UUO)/

CLK:	^D60

; CHANNEL 1 HANDLER
CH1:	0
	SOSLE	CLK
	 JRST	CH1X
	MOVEI	AC2,^D60
	MOVEM	AC2,CLK
	MOVSI	AC2,440700
	HRRI	AC2,CH1MSG
	PUSHJ	PDP,PUTS
CH1X:	CONO	CPA,1001
	JEN	@CH1
CH1MSG:	ASCIZ /*TICK*/

; UUO AND PI VECTORS
LOC 40
LOC40:	0
	JSR	UUO
	JSR	CH1
	HALT	1

RELOC

END ENTRY
